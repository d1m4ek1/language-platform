import{_ as u}from"./_plugin-vue_export-helper-c27b6911.js";import{o as a,c as n,F as d,a as r,g as m}from"./teacher-6ecb1640.js";const F={name:"FileLoader",props:{idFor:String,typeFile:String,nameFormData:String,editPreview:""},data(){return{preview:""}},methods:{listenUploadFile(t){const e=t.target.files[0];this.$emit("onUploadFile",{file:e,nameFormData:this.nameFormData,success:!0}),this.preview=window.URL.createObjectURL(e)},validFile(t){const e=this.formatBytes(t.size);return t.type.startsWith("image/")?(e.typeSize==="Bytes"||e.typeSize==="KB"||e.typeSize==="MB")&&t.size<=5242880?{success:!0}:{message:"Размер файла превышает 5 МБ.",success:!1}:{message:"Не верный тип файла",success:!1}},formatBytes(t,e=2){if(!+t)return"0 Bytes";const s=1024,c=e<0?0:e,l=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(s));return{parsedValue:parseFloat((t/Math.pow(s,i)).toFixed(c)),typeSize:l[i]}},removeFile(){this.preview="",this.$emit("onUploadFile",{remove:!0,nameFormData:this.nameFormData})}},watch:{editPreview:{immediate:!0,handler(t){t!==void 0&&t!==""&&(this.preview=t)}}}},p={class:"file-loader-block"},_=["src"],f=["id"],v=["for"],y={controls:""},g=["src"],h=["id"],B=["for"],w={controls:""},k=["src"],U=["id"],b=["for"];function S(t,e,s,c,l,i){return a(),n("div",p,[s.typeFile==="image"?(a(),n(d,{key:0},[l.preview!==""?(a(),n(d,{key:0},[r("img",{src:l.preview,alt:"Предпросмотр изображения"},null,8,_),r("button",{class:"btn-red",onClick:e[0]||(e[0]=(...o)=>i.removeFile&&i.removeFile(...o))},"Удалить")],64)):(a(),n(d,{key:1},[r("input",{id:s.idFor,accept:"image/png, image/jpg, image/jpeg, image/gif",type:"file",onChange:e[1]||(e[1]=(...o)=>i.listenUploadFile&&i.listenUploadFile(...o))},null,40,f),r("label",{for:s.idFor},"Загрузить изображение",8,v)],64))],64)):m("",!0),s.typeFile==="video"?(a(),n(d,{key:1},[l.preview!==""?(a(),n(d,{key:0},[r("video",y,[r("source",{src:l.preview},null,8,g)]),r("button",{class:"btn-red",onClick:e[2]||(e[2]=(...o)=>i.removeFile&&i.removeFile(...o))},"Удалить")],64)):(a(),n(d,{key:1},[r("input",{id:s.idFor,accept:"video/mp4",type:"file",onChange:e[3]||(e[3]=(...o)=>i.listenUploadFile&&i.listenUploadFile(...o))},null,40,h),r("label",{for:s.idFor},"Загрузить видео",8,B)],64))],64)):m("",!0),s.typeFile==="audio"?(a(),n(d,{key:2},[l.preview!==""?(a(),n(d,{key:0},[r("audio",w,[r("source",{src:l.preview},null,8,k)]),r("button",{class:"btn-red",onClick:e[4]||(e[4]=(...o)=>i.removeFile&&i.removeFile(...o))},"Удалить")],64)):(a(),n(d,{key:1},[r("input",{id:s.idFor,accept:"audio/mpeg",type:"file",onChange:e[5]||(e[5]=(...o)=>i.listenUploadFile&&i.listenUploadFile(...o))},null,40,U),r("label",{for:s.idFor},"Загрузить аудио файл",8,b)],64))],64)):m("",!0)])}const x=u(F,[["render",S],["__scopeId","data-v-9c3710e0"]]);class z{static async fileLoad(e,s,...c){const l=[`upload_type=${s}`,...c];return await fetch(`/teacher/upload-file?${l.join("&")}`,{method:"POST",body:e})}}class M extends z{}export{M as A,x as F};
//# sourceMappingURL=fileLoader-be8b590c.js.map
