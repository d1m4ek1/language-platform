import{s as V,x as A,r as p,y as U,o as i,c as u,a,i as w,l as c,v as y,t as _,u as f,F as h,h as b,g as I,m as C,p as j,j as B}from"./teacher-6ecb1640.js";import{F as O,A as $}from"./fileLoader-be8b590c.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./main-6cdd4766.js";const d=v=>(j("data-v-eaa4f797"),v=v(),B(),v),E={class:"component"},H={class:"title"},G={class:"block-avatar"},R={class:"control-avatar"},q={class:"data-input"},z={class:"component-content"},J={class:"about-me"},K=d(()=>a("h3",null,"О себе",-1)),Q=["innerHTML"],W={class:"language-items"},X=d(()=>a("h3",null,"Преподавание языков",-1)),Y={key:0},Z={class:"list-select"},ee=["onUpdate:modelValue"],ae=["disabled","value"],te={class:"list-select"},le=["onUpdate:modelValue"],ne=["disabled","value"],se=["onClick"],oe={class:"interface-lang"},ie=d(()=>a("h3",null,"Язык интерфейса",-1)),ue=d(()=>a("option",{value:"ru"},"Русский",-1)),re=d(()=>a("option",{disabled:"",value:"en"},"Английский",-1)),de=[ue,re],ce=d(()=>a("h3",null,"Сохранить изменения",-1)),ve={__name:"SettingsProfile",setup(v){const n=V(),{isGetDataClient:S}=A(n),g=p(new FormData),t=p({firstName:"",lastName:"",aboutMe:"",languageItems:[],interfaceLang:"",avatar:"",deleteAvatar:"",isTeacher:null}),r=p([{lang:"en",value:"Английский",disabled:!1}]),k={en:["A0","A1","B1","B2","C1","C2"]};U(S,e=>{e&&(t.value={firstName:n.dataClient.firstName,lastName:n.dataClient.lastName,aboutMe:n.dataClient.aboutMe,languageItems:n.dataClient.languageItems,interfaceLang:n.dataClient.interfaceLang,avatar:n.dataClient.avatar,deleteAvatar:"",isTeacher:n.dataClient.isTeacher})},{immediate:!0});function F(e){if(e.remove)return g.value.delete(e.nameFormData);e.success&&g.value.append(e.nameFormData,e.file)}function x(e){t.value.aboutMe=e.target.innerText}function D(){if(t.value.languageItems.length!==r.value.length){for(let e=0;e<r.value.length;e++)if(!r.value[e].disabled)return t.value.languageItems.push({lang:"",lvl:""})}}function M(e){t.value.languageItems.length!==1&&(t.value.languageItems.splice(e,1),m())}function m(){for(let e=0;e<r.value.length;e++){const o=r.value[e];o.disabled=!1}for(let e=0;e<t.value.languageItems.length;e++){const o=t.value.languageItems[e];r.value=r.value.map(l=>(o.lang===l.lang&&(l.disabled=!0),l))}}m();const T=async()=>{if(g.value.get("avatar")!==null)try{await $.fileLoad(g.value,"avatar").then(e=>e.json()).then(e=>{t.value.deleteAvatar=t.value.avatar,t.value.avatar=e.avatar})}catch(e){console.error(e)}Object.keys(t.value).forEach(e=>{t.value[e]!==""&&n.dataClient[e]!==void 0&&(n.dataClient[e]=t.value[e])}),await n.sandSaveDataClient(t.value)};return(e,o)=>(i(),u("div",E,[a("section",H,[a("figure",G,[a("div",R,[w(O,{"edit-preview":t.value.avatar,"id-for":"file_loader_avatar","name-form-data":"avatar","type-file":"image",onOnUploadFile:F},null,8,["edit-preview"])]),a("figcaption",null,[a("div",q,[c(a("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.firstName=l),class:"input",name:"first_name",placeholder:"Имя",type:"text"},null,512),[[y,t.value.firstName]]),c(a("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.lastName=l),class:"input",name:"last_name",placeholder:"Фамилия",type:"text"},null,512),[[y,t.value.lastName]])]),a("p",null,_(f(n).getTextIsTeacher),1),a("p",null,"Дата регистрации: "+_(f(n).getDate),1)])])]),a("section",z,[a("div",J,[K,a("div",{class:"contenteditable",contenteditable:"true",onInput:x,innerHTML:`<pre>${f(n).getAboutMe}</pre>`},null,40,Q)]),a("div",W,[X,t.value.languageItems!==null?(i(),u("ul",Y,[(i(!0),u(h,null,b(t.value.languageItems,(l,L)=>(i(),u("li",{key:`lang_item_${L}`},[a("div",Z,[c(a("select",{"onUpdate:modelValue":s=>l.lang=s},[(i(!0),u(h,null,b(r.value,(s,N)=>(i(),u("option",{key:`option_${s}_${N}`,disabled:s.disabled,value:s.lang,onClick:m},_(s.value),9,ae))),128))],8,ee),[[C,l.lang]])]),a("div",te,[c(a("select",{"onUpdate:modelValue":s=>l.lvl=s},[(i(!0),u(h,null,b(k[l.lang],(s,N)=>(i(),u("option",{disabled:l.lvl===s,value:s},_(s),9,ne))),256))],8,le),[[C,l.lvl]])]),t.value.languageItems.length!==1?(i(),u("button",{key:0,class:"btn-red",onClick:s=>M(L)}," Удалить ",8,se)):I("",!0)]))),128))])):I("",!0),t.value.languageItems.length!==r.value.length?(i(),u("button",{key:1,class:"btn-blue",onClick:D},"Добавить язык ")):I("",!0)]),a("div",oe,[ie,c(a("select",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.interfaceLang=l)},de,512),[[C,t.value.interfaceLang]])]),a("div",{class:"save-data-settings"},[ce,a("button",{class:"btn-blue",onClick:T},"Сохранить")])])]))}},fe=P(ve,[["__scopeId","data-v-eaa4f797"]]);export{fe as default};
//# sourceMappingURL=SettingsProfile-6e1280cb.js.map
