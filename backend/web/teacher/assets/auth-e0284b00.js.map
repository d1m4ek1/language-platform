{"version":3,"file":"auth-e0284b00.js","sources":["../../../../frontend/teacher/src/assets/auth.js"],"sourcesContent":["const login = document.getElementById(\"login\")\nconst password = document.getElementById(\"password\")\n\n// registration page\nconst fName = document.getElementById(\"first-name\")\nconst lName = document.getElementById(\"last-name\")\nconst email = document.getElementById(\"email\")\nconst regToken = document.getElementById(\"registration-token\")\nconst confirmPassword = document.getElementById(\"confirm-password\")\n\nconst errorMessage = document.getElementById(\"error-message\")\n\n// main page\nconst signout = document.getElementById(\"signout\")\n\n\nlet submit = document.getElementById(\"submit\") || document.getElementById(\"reg-submit\")\n\nif (submit !== null) {\n    submit.addEventListener(\"click\", async () => {\n        let body = ''\n        let url = ''\n        if (submit.id === \"submit\") {\n            url = \"/auth/signin\"\n            body = JSON.stringify({\n                login: login.value,\n                password: password.value\n            })\n        } else {\n            url = \"/auth/registration\"\n            body = JSON.stringify({\n                login: login.value,\n                email: email.value,\n                firstName: fName.value,\n                lastName: lName.value,\n                regToken: regToken.value,\n                password: password.value\n            })\n        }\n\n        errorMessage.style.display = 'none'\n        const response = await fetch(url, {\n            method: \"POST\",\n            body\n        })\n\n        const json = await response.json()\n\n        if (json.error !== undefined && json.error !== '') {\n            errorMessage.style.display = 'block'\n            errorMessage.innerText = json.error\n        }\n\n        if (json.success) {\n            window.location.href = json.isTeacher ? \"/teacher\" : \"/student\"\n        }\n    })\n}\n\nif (signout !== null) {\n    signout.addEventListener(\"click\", async () => {\n        const response = await fetch(\"/auth/signout\", {\n            method: \"GET\"\n        })\n\n        const json = await response.json()\n\n        if (json.success) {\n            window.location.href = \"/\"\n        }\n    })\n}"],"names":["login","password","fName","lName","email","regToken","errorMessage","signout","submit","body","url","json"],"mappings":"AAAA,MAAMA,EAAQ,SAAS,eAAe,OAAO,EACvCC,EAAW,SAAS,eAAe,UAAU,EAG7CC,EAAQ,SAAS,eAAe,YAAY,EAC5CC,EAAQ,SAAS,eAAe,WAAW,EAC3CC,EAAQ,SAAS,eAAe,OAAO,EACvCC,EAAW,SAAS,eAAe,oBAAoB,EACrC,SAAS,eAAe,kBAAkB,EAElE,MAAMC,EAAe,SAAS,eAAe,eAAe,EAGtDC,EAAU,SAAS,eAAe,SAAS,EAGjD,IAAIC,EAAS,SAAS,eAAe,QAAQ,GAAK,SAAS,eAAe,YAAY,EAElFA,IAAW,MACXA,EAAO,iBAAiB,QAAS,SAAY,CACzC,IAAIC,EAAO,GACPC,EAAM,GACNF,EAAO,KAAO,UACdE,EAAM,eACND,EAAO,KAAK,UAAU,CAClB,MAAOT,EAAM,MACb,SAAUC,EAAS,KACnC,CAAa,IAEDS,EAAM,qBACND,EAAO,KAAK,UAAU,CAClB,MAAOT,EAAM,MACb,MAAOI,EAAM,MACb,UAAWF,EAAM,MACjB,SAAUC,EAAM,MAChB,SAAUE,EAAS,MACnB,SAAUJ,EAAS,KACnC,CAAa,GAGLK,EAAa,MAAM,QAAU,OAM7B,MAAMK,EAAO,MALI,MAAM,MAAMD,EAAK,CAC9B,OAAQ,OACR,KAAAD,CACZ,CAAS,GAE2B,KAAM,EAE9BE,EAAK,QAAU,QAAaA,EAAK,QAAU,KAC3CL,EAAa,MAAM,QAAU,QAC7BA,EAAa,UAAYK,EAAK,OAG9BA,EAAK,UACL,OAAO,SAAS,KAAOA,EAAK,UAAY,WAAa,WAEjE,CAAK,EAGDJ,IAAY,MACZA,EAAQ,iBAAiB,QAAS,SAAY,EAK7B,MAJI,MAAM,MAAM,gBAAiB,CAC1C,OAAQ,KACpB,CAAS,GAE2B,KAAM,GAEzB,UACL,OAAO,SAAS,KAAO,IAEnC,CAAK"}